var mt=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Oe=Object.prototype.hasOwnProperty;var rt=(c,r)=>()=>(c&&(r=c(c=0)),r);var z=(c,r)=>()=>(r||c((r={exports:{}}).exports,r),r.exports),qe=(c,r)=>{for(var o in r)mt(c,o,{get:r[o],enumerable:!0})},je=(c,r,o,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let l of $e(r))!Oe.call(c,l)&&l!==o&&mt(c,l,{get:()=>r[l],enumerable:!(u=Le(r,l))||u.enumerable});return c};var Ft=c=>je(mt({},"__esModule",{value:!0}),c);var g=rt(()=>{});function ze(c,r){this.fun=c,this.array=r}function Ct(c){var r=Math.floor((Date.now()-J.now())*.001),o=J.now()*.001,u=Math.floor(o)+r,l=Math.floor(o%1*1e9);return c&&(u=u-c[0],l=l-c[1],l<0&&(u--,l+=_t)),[u,l]}var Rr,J,yt,_t,Dt=rt(()=>{g();B();E();ze.prototype.run=function(){this.fun.apply(null,this.array)};Rr={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},J={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};J.now===void 0&&(yt=Date.now(),J.timing&&J.timing.navigationStart&&(yt=J.timing.navigationStart),J.now=()=>Date.now()-yt);_t=1e9;Ct.bigint=function(c){var r=Ct(c);return typeof BigInt>"u"?r[0]*_t+r[1]:BigInt(r[0]*_t)+BigInt(r[1])}});var E=rt(()=>{Dt()});function Ye(){if(Lt)return ot;Lt=!0,ot.byteLength=w,ot.toByteArray=k,ot.fromByteArray=U;for(var c=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=u.length;l<f;++l)c[l]=u[l],r[u.charCodeAt(l)]=l;r[45]=62,r[95]=63;function s(p){var _=p.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");x===-1&&(x=_);var M=x===_?0:4-x%4;return[x,M]}function w(p){var _=s(p),x=_[0],M=_[1];return(x+M)*3/4-M}function m(p,_,x){return(_+x)*3/4-x}function k(p){var _,x=s(p),M=x[0],O=x[1],P=new o(m(p,M,O)),q=0,W=O>0?M-4:M,L;for(L=0;L<W;L+=4)_=r[p.charCodeAt(L)]<<18|r[p.charCodeAt(L+1)]<<12|r[p.charCodeAt(L+2)]<<6|r[p.charCodeAt(L+3)],P[q++]=_>>16&255,P[q++]=_>>8&255,P[q++]=_&255;return O===2&&(_=r[p.charCodeAt(L)]<<2|r[p.charCodeAt(L+1)]>>4,P[q++]=_&255),O===1&&(_=r[p.charCodeAt(L)]<<10|r[p.charCodeAt(L+1)]<<4|r[p.charCodeAt(L+2)]>>2,P[q++]=_>>8&255,P[q++]=_&255),P}function I(p){return c[p>>18&63]+c[p>>12&63]+c[p>>6&63]+c[p&63]}function v(p,_,x){for(var M,O=[],P=_;P<x;P+=3)M=(p[P]<<16&16711680)+(p[P+1]<<8&65280)+(p[P+2]&255),O.push(I(M));return O.join("")}function U(p){for(var _,x=p.length,M=x%3,O=[],P=16383,q=0,W=x-M;q<W;q+=P)O.push(v(p,q,q+P>W?W:q+P));return M===1?(_=p[x-1],O.push(c[_>>2]+c[_<<4&63]+"==")):M===2&&(_=(p[x-2]<<8)+p[x-1],O.push(c[_>>10]+c[_>>4&63]+c[_<<2&63]+"=")),O.join("")}return ot}function We(){if($t)return ht;$t=!0;return ht.read=function(c,r,o,u,l){var f,s,w=l*8-u-1,m=(1<<w)-1,k=m>>1,I=-7,v=o?l-1:0,U=o?-1:1,p=c[r+v];for(v+=U,f=p&(1<<-I)-1,p>>=-I,I+=w;I>0;f=f*256+c[r+v],v+=U,I-=8);for(s=f&(1<<-I)-1,f>>=-I,I+=u;I>0;s=s*256+c[r+v],v+=U,I-=8);if(f===0)f=1-k;else{if(f===m)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,u),f=f-k}return(p?-1:1)*s*Math.pow(2,f-u)},ht.write=function(c,r,o,u,l,f){var s,w,m,k=f*8-l-1,I=(1<<k)-1,v=I>>1,U=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=u?0:f-1,_=u?1:-1,x=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,s=I):(s=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-s))<1&&(s--,m*=2),s+v>=1?r+=U/m:r+=U*Math.pow(2,1-v),r*m>=2&&(s++,m/=2),s+v>=I?(w=0,s=I):s+v>=1?(w=(r*m-1)*Math.pow(2,l),s=s+v):(w=r*Math.pow(2,v-1)*Math.pow(2,l),s=0));l>=8;c[o+p]=w&255,p+=_,w/=256,l-=8);for(s=s<<l|w,k+=l;k>0;c[o+p]=s&255,p+=_,s/=256,k-=8);c[o+p-_]|=x*128},ht}function He(){if(Ot)return K;Ot=!0;let c=Ye(),r=We(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;K.Buffer=s,K.SlowBuffer=O,K.INSPECT_MAX_BYTES=50;let u=2147483647;K.kMaxLength=u,s.TYPED_ARRAY_SUPPORT=l(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let i=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(i,t),i.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(i){if(i>u)throw new RangeError('The value "'+i+'" is invalid for option "size"');let t=new Uint8Array(i);return Object.setPrototypeOf(t,s.prototype),t}function s(i,t,e){if(typeof i=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(i)}return w(i,t,e)}s.poolSize=8192;function w(i,t,e){if(typeof i=="string")return v(i,t);if(ArrayBuffer.isView(i))return p(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(H(i,ArrayBuffer)||i&&H(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(i,SharedArrayBuffer)||i&&H(i.buffer,SharedArrayBuffer)))return _(i,t,e);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=i.valueOf&&i.valueOf();if(n!=null&&n!==i)return s.from(n,t,e);let a=x(i);if(a)return a;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return s.from(i[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}s.from=function(i,t,e){return w(i,t,e)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function m(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function k(i,t,e){return m(i),i<=0?f(i):t!==void 0?typeof e=="string"?f(i).fill(t,e):f(i).fill(t):f(i)}s.alloc=function(i,t,e){return k(i,t,e)};function I(i){return m(i),f(i<0?0:M(i)|0)}s.allocUnsafe=function(i){return I(i)},s.allocUnsafeSlow=function(i){return I(i)};function v(i,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=P(i,t)|0,n=f(e),a=n.write(i,t);return a!==e&&(n=n.slice(0,a)),n}function U(i){let t=i.length<0?0:M(i.length)|0,e=f(t);for(let n=0;n<t;n+=1)e[n]=i[n]&255;return e}function p(i){if(H(i,Uint8Array)){let t=new Uint8Array(i);return _(t.buffer,t.byteOffset,t.byteLength)}return U(i)}function _(i,t,e){if(t<0||i.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(i):e===void 0?n=new Uint8Array(i,t):n=new Uint8Array(i,t,e),Object.setPrototypeOf(n,s.prototype),n}function x(i){if(s.isBuffer(i)){let t=M(i.length)|0,e=f(t);return e.length===0||i.copy(e,0,0,t),e}if(i.length!==void 0)return typeof i.length!="number"||wt(i.length)?f(0):U(i);if(i.type==="Buffer"&&Array.isArray(i.data))return U(i.data)}function M(i){if(i>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return i|0}function O(i){return+i!=i&&(i=0),s.alloc(+i)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,e){if(H(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,a=e.length;for(let h=0,d=Math.min(n,a);h<d;++h)if(t[h]!==e[h]){n=t[h],a=e[h];break}return n<a?-1:a<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let a=s.allocUnsafe(e),h=0;for(n=0;n<t.length;++n){let d=t[n];if(H(d,Uint8Array))h+d.length>a.length?(s.isBuffer(d)||(d=s.from(d)),d.copy(a,h)):Uint8Array.prototype.set.call(a,d,h);else if(s.isBuffer(d))d.copy(a,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=d.length}return a};function P(i,t){if(s.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||H(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let e=i.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return pt(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Nt(i).length;default:if(a)return n?-1:pt(i).length;t=(""+t).toLowerCase(),a=!0}}s.byteLength=P;function q(i,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(i||(i="utf8");;)switch(i){case"hex":return Te(this,t,e);case"utf8":case"utf-8":return vt(this,t,e);case"ascii":return Ae(this,t,e);case"latin1":case"binary":return Se(this,t,e);case"base64":return ve(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}s.prototype._isBuffer=!0;function W(i,t,e){let n=i[t];i[t]=i[e],i[e]=n}s.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)W(this,e,e+1);return this},s.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)W(this,e,e+3),W(this,e+1,e+2);return this},s.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)W(this,e,e+7),W(this,e+1,e+6),W(this,e+2,e+5),W(this,e+3,e+4);return this},s.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?vt(this,0,t):q.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){let t="",e=K.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(t,e,n,a,h){if(H(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),a===void 0&&(a=0),h===void 0&&(h=this.length),e<0||n>t.length||a<0||h>this.length)throw new RangeError("out of range index");if(a>=h&&e>=n)return 0;if(a>=h)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,a>>>=0,h>>>=0,this===t)return 0;let d=h-a,y=n-e,S=Math.min(d,y),A=this.slice(a,h),T=t.slice(e,n);for(let b=0;b<S;++b)if(A[b]!==T[b]){d=A[b],y=T[b];break}return d<y?-1:y<d?1:0};function L(i,t,e,n,a){if(i.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,wt(e)&&(e=a?0:i.length-1),e<0&&(e=i.length+e),e>=i.length){if(a)return-1;e=i.length-1}else if(e<0)if(a)e=0;else return-1;if(typeof t=="string"&&(t=s.from(t,n)),s.isBuffer(t))return t.length===0?-1:bt(i,t,e,n,a);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(i,t,e):Uint8Array.prototype.lastIndexOf.call(i,t,e):bt(i,[t],e,n,a);throw new TypeError("val must be string, number or Buffer")}function bt(i,t,e,n,a){let h=1,d=i.length,y=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||t.length<2)return-1;h=2,d/=2,y/=2,e/=2}function S(T,b){return h===1?T[b]:T.readUInt16BE(b*h)}let A;if(a){let T=-1;for(A=e;A<d;A++)if(S(i,A)===S(t,T===-1?0:A-T)){if(T===-1&&(T=A),A-T+1===y)return T*h}else T!==-1&&(A-=A-T),T=-1}else for(e+y>d&&(e=d-y),A=e;A>=0;A--){let T=!0;for(let b=0;b<y;b++)if(S(i,A+b)!==S(t,b)){T=!1;break}if(T)return A}return-1}s.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},s.prototype.indexOf=function(t,e,n){return L(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return L(this,t,e,n,!1)};function Ee(i,t,e,n){e=Number(e)||0;let a=i.length-e;n?(n=Number(n),n>a&&(n=a)):n=a;let h=t.length;n>h/2&&(n=h/2);let d;for(d=0;d<n;++d){let y=parseInt(t.substr(d*2,2),16);if(wt(y))return d;i[e+d]=y}return d}function Be(i,t,e,n){return ut(pt(t,i.length-e),i,e,n)}function ke(i,t,e,n){return ut(Ne(t),i,e,n)}function Ie(i,t,e,n){return ut(Nt(t),i,e,n)}function be(i,t,e,n){return ut(Fe(t,i.length-e),i,e,n)}s.prototype.write=function(t,e,n,a){if(e===void 0)a="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")a=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-e;if((n===void 0||n>h)&&(n=h),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let d=!1;for(;;)switch(a){case"hex":return Ee(this,t,e,n);case"utf8":case"utf-8":return Be(this,t,e,n);case"ascii":case"latin1":case"binary":return ke(this,t,e,n);case"base64":return Ie(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,t,e,n);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),d=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(i,t,e){return t===0&&e===i.length?c.fromByteArray(i):c.fromByteArray(i.slice(t,e))}function vt(i,t,e){e=Math.min(i.length,e);let n=[],a=t;for(;a<e;){let h=i[a],d=null,y=h>239?4:h>223?3:h>191?2:1;if(a+y<=e){let S,A,T,b;switch(y){case 1:h<128&&(d=h);break;case 2:S=i[a+1],(S&192)===128&&(b=(h&31)<<6|S&63,b>127&&(d=b));break;case 3:S=i[a+1],A=i[a+2],(S&192)===128&&(A&192)===128&&(b=(h&15)<<12|(S&63)<<6|A&63,b>2047&&(b<55296||b>57343)&&(d=b));break;case 4:S=i[a+1],A=i[a+2],T=i[a+3],(S&192)===128&&(A&192)===128&&(T&192)===128&&(b=(h&15)<<18|(S&63)<<12|(A&63)<<6|T&63,b>65535&&b<1114112&&(d=b))}}d===null?(d=65533,y=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|d&1023),n.push(d),a+=y}return xe(n)}let xt=4096;function xe(i){let t=i.length;if(t<=xt)return String.fromCharCode.apply(String,i);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,i.slice(n,n+=xt));return e}function Ae(i,t,e){let n="";e=Math.min(i.length,e);for(let a=t;a<e;++a)n+=String.fromCharCode(i[a]&127);return n}function Se(i,t,e){let n="";e=Math.min(i.length,e);for(let a=t;a<e;++a)n+=String.fromCharCode(i[a]);return n}function Te(i,t,e){let n=i.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let a="";for(let h=t;h<e;++h)a+=Ce[i[h]];return a}function Ue(i,t,e){let n=i.slice(t,e),a="";for(let h=0;h<n.length-1;h+=2)a+=String.fromCharCode(n[h]+n[h+1]*256);return a}s.prototype.slice=function(t,e){let n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);let a=this.subarray(t,e);return Object.setPrototypeOf(a,s.prototype),a};function N(i,t,e){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+t>e)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||N(t,e,this.length);let a=this[t],h=1,d=0;for(;++d<e&&(h*=256);)a+=this[t+d]*h;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||N(t,e,this.length);let a=this[t+--e],h=1;for(;e>0&&(h*=256);)a+=this[t+--e]*h;return a},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t=t>>>0,e||N(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||N(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||N(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||N(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=X(function(t){t=t>>>0,et(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&nt(t,this.length-8);let a=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,h=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(a)+(BigInt(h)<<BigInt(32))}),s.prototype.readBigUInt64BE=X(function(t){t=t>>>0,et(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&nt(t,this.length-8);let a=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],h=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(a)<<BigInt(32))+BigInt(h)}),s.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||N(t,e,this.length);let a=this[t],h=1,d=0;for(;++d<e&&(h*=256);)a+=this[t+d]*h;return h*=128,a>=h&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||N(t,e,this.length);let a=e,h=1,d=this[t+--a];for(;a>0&&(h*=256);)d+=this[t+--a]*h;return h*=128,d>=h&&(d-=Math.pow(2,8*e)),d},s.prototype.readInt8=function(t,e){return t=t>>>0,e||N(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){t=t>>>0,e||N(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(t,e){t=t>>>0,e||N(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(t,e){return t=t>>>0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t=t>>>0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=X(function(t){t=t>>>0,et(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&nt(t,this.length-8);let a=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),s.prototype.readBigInt64BE=X(function(t){t=t>>>0,et(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&nt(t,this.length-8);let a=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),s.prototype.readFloatLE=function(t,e){return t=t>>>0,e||N(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t=t>>>0,e||N(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||N(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||N(t,8,this.length),r.read(this,t,!1,52,8)};function j(i,t,e,n,a,h){if(!s.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<h)throw new RangeError('"value" argument is out of bounds');if(e+n>i.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,a){if(t=+t,e=e>>>0,n=n>>>0,!a){let y=Math.pow(2,8*n)-1;j(this,t,e,n,y,0)}let h=1,d=0;for(this[e]=t&255;++d<n&&(h*=256);)this[e+d]=t/h&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,a){if(t=+t,e=e>>>0,n=n>>>0,!a){let y=Math.pow(2,8*n)-1;j(this,t,e,n,y,0)}let h=n-1,d=1;for(this[e+h]=t&255;--h>=0&&(d*=256);)this[e+h]=t/d&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,1,255,0),this[e]=t&255,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function At(i,t,e,n,a){Rt(t,n,a,i,e,7);let h=Number(t&BigInt(4294967295));i[e++]=h,h=h>>8,i[e++]=h,h=h>>8,i[e++]=h,h=h>>8,i[e++]=h;let d=Number(t>>BigInt(32)&BigInt(4294967295));return i[e++]=d,d=d>>8,i[e++]=d,d=d>>8,i[e++]=d,d=d>>8,i[e++]=d,e}function St(i,t,e,n,a){Rt(t,n,a,i,e,7);let h=Number(t&BigInt(4294967295));i[e+7]=h,h=h>>8,i[e+6]=h,h=h>>8,i[e+5]=h,h=h>>8,i[e+4]=h;let d=Number(t>>BigInt(32)&BigInt(4294967295));return i[e+3]=d,d=d>>8,i[e+2]=d,d=d>>8,i[e+1]=d,d=d>>8,i[e]=d,e+8}s.prototype.writeBigUInt64LE=X(function(t,e=0){return At(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=X(function(t,e=0){return St(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,n,a){if(t=+t,e=e>>>0,!a){let S=Math.pow(2,8*n-1);j(this,t,e,n,S-1,-S)}let h=0,d=1,y=0;for(this[e]=t&255;++h<n&&(d*=256);)t<0&&y===0&&this[e+h-1]!==0&&(y=1),this[e+h]=(t/d>>0)-y&255;return e+n},s.prototype.writeIntBE=function(t,e,n,a){if(t=+t,e=e>>>0,!a){let S=Math.pow(2,8*n-1);j(this,t,e,n,S-1,-S)}let h=n-1,d=1,y=0;for(this[e+h]=t&255;--h>=0&&(d*=256);)t<0&&y===0&&this[e+h+1]!==0&&(y=1),this[e+h]=(t/d>>0)-y&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},s.prototype.writeBigInt64LE=X(function(t,e=0){return At(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=X(function(t,e=0){return St(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Tt(i,t,e,n,a,h){if(e+n>i.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ut(i,t,e,n,a){return t=+t,e=e>>>0,a||Tt(i,t,e,4),r.write(i,t,e,n,23,4),e+4}s.prototype.writeFloatLE=function(t,e,n){return Ut(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return Ut(this,t,e,!1,n)};function Pt(i,t,e,n,a){return t=+t,e=e>>>0,a||Tt(i,t,e,8),r.write(i,t,e,n,52,8),e+8}s.prototype.writeDoubleLE=function(t,e,n){return Pt(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return Pt(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,a){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!a&&a!==0&&(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<n&&(a=n),a===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-n&&(a=t.length-e+n);let h=a-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,a):Uint8Array.prototype.set.call(t,this.subarray(n,a),e),h},s.prototype.fill=function(t,e,n,a){if(typeof t=="string"){if(typeof e=="string"?(a=e,e=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(t.length===1){let d=t.charCodeAt(0);(a==="utf8"&&d<128||a==="latin1")&&(t=d)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let h;if(typeof t=="number")for(h=e;h<n;++h)this[h]=t;else{let d=s.isBuffer(t)?t:s.from(t,a),y=d.length;if(y===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(h=0;h<n-e;++h)this[h+e]=d[h%y]}return this};let tt={};function dt(i,t,e){tt[i]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(i,t){return`The "${i}" argument must be of type number. Received type ${typeof t}`},TypeError),dt("ERR_OUT_OF_RANGE",function(i,t,e){let n=`The value of "${i}" is out of range.`,a=e;return Number.isInteger(e)&&Math.abs(e)>2**32?a=Mt(String(e)):typeof e=="bigint"&&(a=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(a=Mt(a)),a+="n"),n+=` It must be ${t}. Received ${a}`,n},RangeError);function Mt(i){let t="",e=i.length,n=i[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${i.slice(e-3,e)}${t}`;return`${i.slice(0,e)}${t}`}function Pe(i,t,e){et(t,"offset"),(i[t]===void 0||i[t+e]===void 0)&&nt(t,i.length-(e+1))}function Rt(i,t,e,n,a,h){if(i>e||i<t){let d=typeof t=="bigint"?"n":"",y;throw h>3?t===0||t===BigInt(0)?y=`>= 0${d} and < 2${d} ** ${(h+1)*8}${d}`:y=`>= -(2${d} ** ${(h+1)*8-1}${d}) and < 2 ** ${(h+1)*8-1}${d}`:y=`>= ${t}${d} and <= ${e}${d}`,new tt.ERR_OUT_OF_RANGE("value",y,i)}Pe(n,a,h)}function et(i,t){if(typeof i!="number")throw new tt.ERR_INVALID_ARG_TYPE(t,"number",i)}function nt(i,t,e){throw Math.floor(i)!==i?(et(i,e),new tt.ERR_OUT_OF_RANGE(e||"offset","an integer",i)):t<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,i)}let Me=/[^+/0-9A-Za-z-_]/g;function Re(i){if(i=i.split("=")[0],i=i.trim().replace(Me,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function pt(i,t){t=t||1/0;let e,n=i.length,a=null,h=[];for(let d=0;d<n;++d){if(e=i.charCodeAt(d),e>55295&&e<57344){if(!a){if(e>56319){(t-=3)>-1&&h.push(239,191,189);continue}else if(d+1===n){(t-=3)>-1&&h.push(239,191,189);continue}a=e;continue}if(e<56320){(t-=3)>-1&&h.push(239,191,189),a=e;continue}e=(a-55296<<10|e-56320)+65536}else a&&(t-=3)>-1&&h.push(239,191,189);if(a=null,e<128){if((t-=1)<0)break;h.push(e)}else if(e<2048){if((t-=2)<0)break;h.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;h.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;h.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return h}function Ne(i){let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e)&255);return t}function Fe(i,t){let e,n,a,h=[];for(let d=0;d<i.length&&!((t-=2)<0);++d)e=i.charCodeAt(d),n=e>>8,a=e%256,h.push(a),h.push(n);return h}function Nt(i){return c.toByteArray(Re(i))}function ut(i,t,e,n){let a;for(a=0;a<n&&!(a+e>=t.length||a>=i.length);++a)t[a+e]=i[a];return a}function H(i,t){return i instanceof t||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===t.name}function wt(i){return i!==i}let Ce=function(){let i="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let n=e*16;for(let a=0;a<16;++a)t[n+a]=i[e]+i[a]}return t}();function X(i){return typeof BigInt>"u"?De:i}function De(){throw new Error("BigInt not supported")}return K}var ot,Lt,ht,$t,K,Ot,Q,R,$r,Or,qt=rt(()=>{g();B();E();ot={},Lt=!1;ht={},$t=!1;K={},Ot=!1;Q=He();Q.Buffer;Q.SlowBuffer;Q.INSPECT_MAX_BYTES;Q.kMaxLength;R=Q.Buffer,$r=Q.INSPECT_MAX_BYTES,Or=Q.kMaxLength});var B=rt(()=>{qt()});var zt=z((Gr,jt)=>{g();B();E();jt.exports=Ge;function Ge(c){var r,o;if(typeof c!="function")throw new Error("expected a function but got "+c);return function(){return r||(r=!0,o=c.apply(this,arguments),c=void 0),o}}});var Wt=z((Kr,Yt)=>{g();B();E();Yt.exports={encode:c=>new Uint8Array(R.from(c,"utf8")),decode:c=>R.from(c).toString("utf8")}});var Gt=z((ei,Ht)=>{g();B();E();Ht.exports=Xe;function Xe(c,r,o){var u=null,l=null,f=function(){u&&(clearTimeout(u),l=null,u=null)},s=function(){var m=l;f(),m&&m()},w=function(){if(!r)return c.apply(this,arguments);var m=this,k=arguments,I=o&&!u;if(f(),l=function(){c.apply(m,k)},u=setTimeout(function(){if(u=null,!I){var v=l;return l=null,v()}},r),I)return l()};return w.cancel=f,w.flush=s,w}});var ct=z((oi,Jt)=>{g();B();E();function Xt(c){if(c.length===0)return".";let r=Vt(c);return r=r.reduce(Qe,[]),gt(...r)}function Ve(...c){let r="";for(let o of c)o.startsWith("/")?r=o:r=Xt(gt(r,o));return r}function gt(...c){if(c.length===0)return"";let r=c.join("/");return r=r.replace(/\/{2,}/g,"/"),r}function Vt(c){if(c.length===0)return[];if(c==="/")return["/"];let r=c.split("/");return r[r.length-1]===""&&r.pop(),c[0]==="/"?r[0]="/":r[0]!=="."&&r.unshift("."),r}function Je(c){let r=c.lastIndexOf("/");if(r===-1)throw new Error(`Cannot get dirname of "${c}"`);return r===0?"/":c.slice(0,r)}function Ke(c){if(c==="/")throw new Error(`Cannot get basename of "${c}"`);let r=c.lastIndexOf("/");return r===-1?c:c.slice(r+1)}function Qe(c,r){if(c.length===0)return c.push(r),c;if(r===".")return c;if(r===".."){if(c.length===1){if(c[0]==="/")throw new Error("Unable to normalize path - traverses above root directory");if(c[0]===".")return c.push(r),c}return c[c.length-1]===".."?(c.push(".."),c):(c.pop(),c)}return c.push(r),c}Jt.exports={join:gt,normalize:Xt,split:Vt,basename:Ke,dirname:Je,resolve:Ve}});var Et=z((hi,Kt)=>{g();B();E();function it(c){return class extends Error{constructor(...r){super(...r),this.code=c,this.message?this.message=c+": "+this.message:this.message=c}}}var Ze=it("EEXIST"),tr=it("ENOENT"),er=it("ENOTDIR"),rr=it("ENOTEMPTY"),ir=it("ETIMEDOUT"),nr=it("EISDIR");Kt.exports={EEXIST:Ze,ENOENT:tr,ENOTDIR:er,ENOTEMPTY:rr,ETIMEDOUT:ir,EISDIR:nr}});var ee=z((wi,te)=>{g();B();E();var $=ct(),{EEXIST:Qt,ENOENT:or,ENOTDIR:Zt,ENOTEMPTY:sr,EISDIR:ar}=Et(),D=0;te.exports=class{constructor(){}_makeRoot(r=new Map){return r.set(D,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),r}activate(r=null){r===null?this._root=new Map([["/",this._makeRoot()]]):typeof r=="string"?this._root=new Map([["/",this._makeRoot(this.parse(r))]]):this._root=r}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(r){let o=1;for(let[u,l]of r)u!==D&&(o+=this._countInodes(l));return o}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(r){let o=r.get(D).ino;for(let[u,l]of r)u!==D&&(o=Math.max(o,this._maxInode(l)));return o}print(r=this._root.get("/")){let o="",u=(l,f)=>{for(let[s,w]of l){if(s===0)continue;let m=w.get(D),k=m.mode.toString(8);o+=`${"	".repeat(f)}${s}	${k}`,m.type==="file"?o+=`	${m.size}	${m.mtimeMs}
`:(o+=`
`,u(w,f+1))}};return u(r,0),o}parse(r){let o=0;function u(w){let m=++o,k=w.length===1?"dir":"file",[I,v,U]=w;return I=parseInt(I,8),v=v?parseInt(v):0,U=U?parseInt(U):Date.now(),new Map([[D,{mode:I,type:k,size:v,mtimeMs:U,ino:m}]])}let l=r.trim().split(`
`),f=this._makeRoot(),s=[{indent:-1,node:f},{indent:0,node:null}];for(let w of l){let k=w.match(/^\t*/)[0].length;w=w.slice(k);let[I,...v]=w.split("	"),U=u(v);if(k<=s[s.length-1].indent)for(;k<=s[s.length-1].indent;)s.pop();s.push({indent:k,node:U}),s[s.length-2].node.set(I,U)}return f}_lookup(r,o=!0){let u=this._root,l="/",f=$.split(r);for(let s=0;s<f.length;++s){let w=f[s];if(u=u.get(w),!u)throw new or(r);if(o||s<f.length-1){let m=u.get(D);if(m.type==="symlink"){let k=$.resolve(l,m.target);u=this._lookup(k)}l?l=$.join(l,w):l=w}}return u}mkdir(r,{mode:o}){if(r==="/")throw new Qt;let u=this._lookup($.dirname(r)),l=$.basename(r);if(u.has(l))throw new Qt;let f=new Map,s={mode:o,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};f.set(D,s),u.set(l,f)}rmdir(r){let o=this._lookup(r);if(o.get(D).type!=="dir")throw new Zt;if(o.size>1)throw new sr;let u=this._lookup($.dirname(r)),l=$.basename(r);u.delete(l)}readdir(r){let o=this._lookup(r);if(o.get(D).type!=="dir")throw new Zt;return[...o.keys()].filter(u=>typeof u=="string")}writeStat(r,o,{mode:u}){let l,f;try{f=this.stat(r)}catch{}if(f!==void 0){if(f.type==="dir")throw new ar;u==null&&(u=f.mode),l=f.ino}u==null&&(u=438),l==null&&(l=this.autoinc());let s=this._lookup($.dirname(r)),w=$.basename(r),m={mode:u,type:"file",size:o,mtimeMs:Date.now(),ino:l},k=new Map;return k.set(D,m),s.set(w,k),m}unlink(r){let o=this._lookup($.dirname(r)),u=$.basename(r);o.delete(u)}rename(r,o){let u=$.basename(o),l=this._lookup(r);this._lookup($.dirname(o)).set(u,l),this.unlink(r)}stat(r){return this._lookup(r).get(D)}lstat(r){return this._lookup(r,!1).get(D)}readlink(r){return this._lookup(r,!1).get(D).target}symlink(r,o){let u,l;try{let k=this.stat(o);l===null&&(l=k.mode),u=k.ino}catch{}l==null&&(l=40960),u==null&&(u=this.autoinc());let f=this._lookup($.dirname(o)),s=$.basename(o),w={mode:l,type:"symlink",target:r,size:0,mtimeMs:Date.now(),ino:u},m=new Map;return m.set(D,w),f.set(s,m),w}_du(r){let o=0;for(let[u,l]of r.entries())u===D?o+=l.size:o+=this._du(l);return o}du(r){let o=this._lookup(r);return this._du(o)}}});var kt={};qe(kt,{Store:()=>lt,clear:()=>fr,close:()=>pr,del:()=>lr,get:()=>ur,keys:()=>dr,set:()=>hr,update:()=>cr});function Z(){return Bt||(Bt=new lt),Bt}function ur(c,r=Z()){let o;return r._withIDBStore("readwrite",u=>{o=u.get(c)}).then(()=>o.result)}function hr(c,r,o=Z()){return o._withIDBStore("readwrite",u=>{u.put(r,c)})}function cr(c,r,o=Z()){return o._withIDBStore("readwrite",u=>{let l=u.get(c);l.onsuccess=()=>{u.put(r(l.result),c)}})}function lr(c,r=Z()){return r._withIDBStore("readwrite",o=>{o.delete(c)})}function fr(c=Z()){return c._withIDBStore("readwrite",r=>{r.clear()})}function dr(c=Z()){let r=[];return c._withIDBStore("readwrite",o=>{(o.openKeyCursor||o.openCursor).call(o).onsuccess=function(){this.result&&(r.push(this.result.key),this.result.continue())}}).then(()=>r)}function pr(c=Z()){return c._close()}var lt,Bt,It=rt(()=>{g();B();E();lt=class{constructor(r="keyval-store",o="keyval"){this.storeName=o,this._dbName=r,this._storeName=o,this._init()}_init(){this._dbp||(this._dbp=new Promise((r,o)=>{let u=indexedDB.open(this._dbName);u.onerror=()=>o(u.error),u.onsuccess=()=>r(u.result),u.onupgradeneeded=()=>{u.result.createObjectStore(this._storeName)}}))}_withIDBStore(r,o){return this._init(),this._dbp.then(u=>new Promise((l,f)=>{let s=u.transaction(this.storeName,r);s.oncomplete=()=>l(),s.onabort=s.onerror=()=>f(s.error),o(s.objectStore(this.storeName))}))}_close(){return this._init(),this._dbp.then(r=>{r.close(),this._dbp=void 0})}}});var ie=z((Ii,re)=>{g();B();E();var V=(It(),Ft(kt));re.exports=class{constructor(r,o){this._database=r,this._storename=o,this._store=new V.Store(this._database,this._storename)}saveSuperblock(r){return V.set("!root",r,this._store)}loadSuperblock(){return V.get("!root",this._store)}readFile(r){return V.get(r,this._store)}writeFile(r,o){return V.set(r,o,this._store)}unlink(r){return V.del(r,this._store)}wipe(){return V.clear(this._store)}close(){return V.close(this._store)}}});var oe=z((Si,ne)=>{g();B();E();ne.exports=class{constructor(r){this._url=r}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then(r=>r.ok?r.text():null)}async readFile(r){let o=await fetch(this._url+r);if(o.status===200)return o.arrayBuffer();throw new Error("ENOENT")}async sizeFile(r){let o=await fetch(this._url+r,{method:"HEAD"});if(o.status===200)return o.headers.get("content-length");throw new Error("ENOENT")}}});var ae=z((Ri,se)=>{g();B();E();var st=(It(),Ft(kt)),wr=c=>new Promise(r=>setTimeout(r,c));se.exports=class{constructor(r,o){this._id=Math.random(),this._database=r,this._storename=o,this._store=new st.Store(this._database,this._storename),this._lock=null}async has({margin:r=2e3}={}){if(this._lock&&this._lock.holder===this._id){let o=Date.now();return this._lock.expires>o+r?!0:await this.renew()}else return!1}async renew({ttl:r=5e3}={}){let o;return await st.update("lock",u=>{let f=Date.now()+r;return o=u&&u.holder===this._id,this._lock=o?{holder:this._id,expires:f}:u,this._lock},this._store),o}async acquire({ttl:r=5e3}={}){let o,u,l;if(await st.update("lock",f=>{let s=Date.now(),w=s+r;return u=f&&f.expires<s,o=f===void 0||u,l=f&&f.holder===this._id,this._lock=o?{holder:this._id,expires:w}:f,this._lock},this._store),l)throw new Error("Mutex double-locked");return o}async wait({interval:r=100,limit:o=6e3,ttl:u}={}){for(;o--;){if(await this.acquire({ttl:u}))return!0;await wr(r)}throw new Error("Mutex timeout")}async release({force:r=!1}={}){let o,u,l;if(await st.update("lock",f=>(o=r||f&&f.holder===this._id,u=f===void 0,l=f&&f.holder!==this._id,this._lock=o?void 0:f,this._lock),this._store),await st.close(this._store),!o&&!r){if(u)throw new Error("Mutex double-freed");if(l)throw new Error("Mutex lost ownership")}return o}}});var he=z((Li,ue)=>{g();B();E();ue.exports=class{constructor(r){this._id=Math.random(),this._database=r,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise(r=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},o=>(this._has=!!o,r(!!o),new Promise(u=>{this._release=u})))})}async wait({timeout:r=6e5}={}){return new Promise((o,u)=>{let l=new AbortController;setTimeout(()=>{l.abort(),u(new Error("Mutex timeout"))},r),navigator.locks.request(this._database+"_lock",{signal:l.signal},f=>(this._has=!!f,o(!!f),new Promise(s=>{this._release=s})))})}async release({force:r=!1}={}){this._has=!1,this._release?this._release():r&&navigator.locks.request(this._database+"_lock",{steal:!0},o=>!0)}}});var fe=z((zi,le)=>{g();B();E();var{encode:mr,decode:ce}=Wt(),yr=Gt(),_r=ee(),{ENOENT:gr,ENOTEMPTY:Er,ETIMEDOUT:Br}=Et(),kr=ie(),Ir=oe(),br=ae(),vr=he(),at=ct();le.exports=class{constructor(){this.saveSuperblock=yr(()=>{this.flush()},500)}async init(r,{wipe:o,url:u,urlauto:l,fileDbName:f=r,db:s=null,fileStoreName:w=r+"_files",lockDbName:m=r+"_lock",lockStoreName:k=r+"_lock"}={}){this._name=r,this._idb=s||new kr(f,w),this._mutex=navigator.locks?new vr(r):new br(m,k),this._cache=new _r(r),this._opts={wipe:o,url:u},this._needsWipe=!!o,u&&(this._http=new Ir(u),this._urlauto=!!l)}async activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();let r=await this._idb.loadSuperblock();if(r)this._cache.activate(r);else if(this._http){let o=await this._http.loadSuperblock();this._cache.activate(o),await this._saveSuperblock()}else this._cache.activate();if(!await this._mutex.has())throw new Br}async deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch(r){console.log(r)}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}_writeStat(r,o,u){let l=at.split(at.dirname(r)),f=l.shift();for(let s of l){f=at.join(f,s);try{this._cache.mkdir(f,{mode:511})}catch{}}return this._cache.writeStat(r,o,u)}async readFile(r,o){let u=typeof o=="string"?o:o&&o.encoding;if(u&&u!=="utf8")throw new Error('Only "utf8" encoding is supported in readFile');let l=null,f=null;try{f=this._cache.stat(r),l=await this._idb.readFile(f.ino)}catch(s){if(!this._urlauto)throw s}if(!l&&this._http){let s=this._cache.lstat(r);for(;s.type==="symlink";)r=at.resolve(at.dirname(r),s.target),s=this._cache.lstat(r);l=await this._http.readFile(r)}if(l&&((!f||f.size!=l.byteLength)&&(f=await this._writeStat(r,l.byteLength,{mode:f?f.mode:438}),this.saveSuperblock()),u==="utf8"?l=ce(l):l.toString=()=>ce(l)),!f)throw new gr(r);return l}async writeFile(r,o,u){let{mode:l,encoding:f="utf8"}=u;if(typeof o=="string"){if(f!=="utf8")throw new Error('Only "utf8" encoding is supported in writeFile');o=mr(o)}let s=await this._cache.writeStat(r,o.byteLength,{mode:l});await this._idb.writeFile(s.ino,o)}async unlink(r,o){let u=this._cache.lstat(r);this._cache.unlink(r),u.type!=="symlink"&&await this._idb.unlink(u.ino)}readdir(r,o){return this._cache.readdir(r)}mkdir(r,o){let{mode:u=511}=o;this._cache.mkdir(r,{mode:u})}rmdir(r,o){if(r==="/")throw new Er;this._cache.rmdir(r)}rename(r,o){this._cache.rename(r,o)}stat(r,o){return this._cache.stat(r)}lstat(r,o){return this._cache.lstat(r)}readlink(r,o){return this._cache.readlink(r)}symlink(r,o){this._cache.symlink(r,o)}async backFile(r,o){let u=await this._http.sizeFile(r);await this._writeStat(r,u,o)}du(r){return this._cache.du(r)}flush(){return this._saveSuperblock()}}});var pe=z((Xi,de)=>{g();B();E();de.exports=class{constructor(r){this.type=r.type,this.mode=r.mode,this.size=r.size,this.ino=r.ino,this.mtimeMs=r.mtimeMs,this.ctimeMs=r.ctimeMs||r.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return this.type==="file"}isDirectory(){return this.type==="dir"}isSymbolicLink(){return this.type==="symlink"}}});var _e=z((Zi,ye)=>{g();B();E();var xr=fe(),we=pe(),ft=ct();function G(c,r,...o){return c=ft.normalize(c),(typeof r>"u"||typeof r=="function")&&(r={}),typeof r=="string"&&(r={encoding:r}),[c,r,...o]}function Ar(c,r,o,...u){return c=ft.normalize(c),(typeof o>"u"||typeof o=="function")&&(o={}),typeof o=="string"&&(o={encoding:o}),[c,r,o,...u]}function me(c,r,...o){return[ft.normalize(c),ft.normalize(r),...o]}ye.exports=class{constructor(r,o={}){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,G,!1),this.writeFile=this._wrap(this.writeFile,Ar,!0),this.unlink=this._wrap(this.unlink,G,!0),this.readdir=this._wrap(this.readdir,G,!1),this.mkdir=this._wrap(this.mkdir,G,!0),this.rmdir=this._wrap(this.rmdir,G,!0),this.rename=this._wrap(this.rename,me,!0),this.stat=this._wrap(this.stat,G,!1),this.lstat=this._wrap(this.lstat,G,!1),this.readlink=this._wrap(this.readlink,G,!1),this.symlink=this._wrap(this.symlink,me,!0),this.backFile=this._wrap(this.backFile,G,!0),this.du=this._wrap(this.du,G,!1),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,r&&this.init(r,o)}async init(...r){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...r),this._initPromise}async _init(r,o={}){await this._gracefulShutdown(),this._activationPromise&&await this._deactivate(),this._backend&&this._backend.destroy&&await this._backend.destroy(),this._backend=o.backend||new xr,this._backend.init&&await this._backend.init(r,o),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),o.defer||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise(r=>this._gracefulShutdownResolve=r),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(r,o,u){return async(...l)=>{l=o(...l);let f={name:r.name,args:l};this._operations.add(f);try{return await this._activate(),await r.apply(this,l)}finally{this._operations.delete(f),u&&this._backend.saveSuperblock(),this._operations.size===0&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){this._initPromise||console.warn(new Error(`Attempted to use LightningFS ${this._name} before it was initialized.`)),await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this._backend.activate?this._backend.activate():Promise.resolve()),await this._activationPromise}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this._backend.deactivate?this._backend.deactivate():Promise.resolve()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async readFile(r,o){return this._backend.readFile(r,o)}async writeFile(r,o,u){return await this._backend.writeFile(r,o,u),null}async unlink(r,o){return await this._backend.unlink(r,o),null}async readdir(r,o){return this._backend.readdir(r,o)}async mkdir(r,o){return await this._backend.mkdir(r,o),null}async rmdir(r,o){return await this._backend.rmdir(r,o),null}async rename(r,o){return await this._backend.rename(r,o),null}async stat(r,o){let u=await this._backend.stat(r,o);return new we(u)}async lstat(r,o){let u=await this._backend.lstat(r,o);return new we(u)}async readlink(r,o){return this._backend.readlink(r,o)}async symlink(r,o){return await this._backend.symlink(r,o),null}async backFile(r,o){return await this._backend.backFile(r,o),null}async du(r){return this._backend.du(r)}async flush(){return this._backend.flush()}}});var Ur=z((on,ge)=>{g();B();E();var Sr=zt(),Tr=_e();function Y(c,r){return typeof c=="function"&&(r=c),r=Sr(r),[(...u)=>r(null,...u),r]}ge.exports=class{constructor(...r){this.promises=new Tr(...r),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this),this.flush=this.flush.bind(this)}init(r,o){return this.promises.init(r,o)}readFile(r,o,u){let[l,f]=Y(o,u);this.promises.readFile(r,o).then(l).catch(f)}writeFile(r,o,u,l){let[f,s]=Y(u,l);this.promises.writeFile(r,o,u).then(f).catch(s)}unlink(r,o,u){let[l,f]=Y(o,u);this.promises.unlink(r,o).then(l).catch(f)}readdir(r,o,u){let[l,f]=Y(o,u);this.promises.readdir(r,o).then(l).catch(f)}mkdir(r,o,u){let[l,f]=Y(o,u);this.promises.mkdir(r,o).then(l).catch(f)}rmdir(r,o,u){let[l,f]=Y(o,u);this.promises.rmdir(r,o).then(l).catch(f)}rename(r,o,u){let[l,f]=Y(u);this.promises.rename(r,o).then(l).catch(f)}stat(r,o,u){let[l,f]=Y(o,u);this.promises.stat(r).then(l).catch(f)}lstat(r,o,u){let[l,f]=Y(o,u);this.promises.lstat(r).then(l).catch(f)}readlink(r,o,u){let[l,f]=Y(o,u);this.promises.readlink(r).then(l).catch(f)}symlink(r,o,u){let[l,f]=Y(u);this.promises.symlink(r,o).then(l).catch(f)}backFile(r,o,u){let[l,f]=Y(o,u);this.promises.backFile(r,o).then(l).catch(f)}du(r,o){let[u,l]=Y(o);this.promises.du(r).then(u).catch(l)}flush(r){let[o,u]=Y(r);this.promises.flush().then(o).catch(u)}}});export default Ur();
/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=lightning-fs.min.mjs.map
